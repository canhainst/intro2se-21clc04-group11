<div class="row m-0">
  <div class="col-2 ps-0 pe-0">
    <div class="account-side-bar">
      <ul>
        <li class="mb-1">
          <a href="/account/profile" style="color: #fff;font-size: 18px;">
            <i class="fas fa-user-circle" style="width: 20px;height: 20px;"></i>
            <span style="padding: 0 1em; text-align: justify;">MY ACCOUNT</span>
          </a>
        </li>
        <li class="mb-1">
          <a href="/account/mypurchase" style="color: #fff;font-size: 18px;">
            <i class="fas fa-cart-plus" style="width: 20px;height: 20px;"></i>
            <span style="padding: 0 1em; text-align: justify;">MY PURCHASE</span>
          </a>
        </li>
        <li class="mb-1">
          <a href="/account/password" style="color: #fff;font-size: 18px;">
            <i class="fas fa-unlock-alt" style="width: 20px;height: 20px;"></i>
            <span style="padding: 0 1em; text-align: justify; font-weight: 900;">MY PASSWORD</span>
          </a>
        </li>
      </ul>
    </div>
  </div>
  <div class="col ps-0" style="height: 90vh; width: 100%; border: 2px solid black;">
    <div class="container border-0 justify-content-center" style="padding-top: 25vh;margin-left:5%">
      <form action="/account/password" method="post" id="changePassForm">
        <div class="row offset-1 text-end" style="margin-left: 10%;">
          <label for="inputOldPassword" class="col-sm-3 col-form-label ps-5">OLD PASSWORD</label>
          <div class="col-sm-5">
            <input type="password" class="form-control" id="inputOldPassword" name="inputOldPassword"
              placeholder="Enter password" required>
          </div>
        </div>
        {{#if failureMessage}}
          <small class="text-danger d-flex justify-content-center">Wrong Password!!!</small>
        {{/if}}
        <div class="mt-3 row offset-1 text-end" style="margin-left: 10%;">
          <label for="inputNewPassword" class="col-sm-3 col-form-label ps-5">NEW PASSWORD</label>
          <div class="col-sm-5">
            <input type="password" class="form-control" id="inputNewPassword" name="inputNewPassword"
              placeholder="Enter password" required>
          </div>
        </div>
        <small id="PwErr" class="text-danger d-flex justify-content-center"></small>
        <div class="mt-3 row offset-1 text-end" style="margin-left: 10%;">
          <label for="inputConfirmPassword" class="col-sm-3 col-form-label">CONFIRM PASSWORD</label>
          <div class="col-sm-5">
            <input type="password" class="form-control" id="inputConfirmPassword" name="inputConfirmPassword"
              placeholder="Enter confirm password" required>
          </div>
        </div>
        <small id="confirmPwErr" class="text-danger d-flex justify-content-center"></small>
        <div class="col-12 text-center mt-4" style="margin-left: -10px">
          <button class="btn fw-bold ps-5 pe-5" type="submit"
            style="background-color: #3D5940;color: #fff;">SAVE</button>
        </div>
      </form>
    </div>
  </div>
</div>
<script>
  $(() => {
    if ({{successfulMessage}}) {
      alert('Update successfully');
      window.location.href= '/account/password';
    }    
    $('#changePassForm').submit(function (e) {
      // check Password
      $('#PwErr').html(($('#inputNewPassword').val().length >= 8) ? '' : '<i>password must be at least 8 characters long</i>');
      
      //check confirmPassword
      console.log($('#inputNewPassword').val() != $('#inputConfirmPassword').val());
      $('#confirmPwErr').html(($('#inputNewPassword').val() != $('#inputConfirmPassword').val()) ? '<i>confirm password is incorrect</i>' : '');
      if ($('#confirmPwErr').html() === '' &&  $('#PwErr').html() === '' ) {
        $('#changePassForm').submit();
      } else {
        e.preventDefault();
      }
    });
  })
</script>